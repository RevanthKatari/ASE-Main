<div class="app-shell">
  <header class="top-nav">
    <a routerLink="/listings" class="brand">
      <span class="brand-icon">üè†</span>
      {{ title }}
    </a>

    <nav class="links">
      <a routerLink="/listings" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        Housing
      </a>
      <a routerLink="/events" routerLinkActive="active">
        Events
      </a>
      <a routerLink="/cs-events" routerLinkActive="active">
        CS Events
      </a>
      <a
        *ngIf="(currentUser$ | async)?.role !== 'student'"
        routerLink="/moderation"
        routerLinkActive="active"
      >
        Moderation
      </a>
    </nav>

    <div class="auth-area">
      <ng-container *ngIf="currentUser$ | async as user; else guestLinks">
        <div class="user-info">
          <span class="user-avatar">{{ user.full_name.charAt(0).toUpperCase() }}</span>
          <div class="user-details">
            <span class="user-name">{{ user.full_name }}</span>
            <span class="user-role">{{ user.role }}</span>
          </div>
        </div>
        <button type="button" (click)="logout()" class="btn-signout">Sign Out</button>
      </ng-container>
      <ng-template #guestLinks>
        <a routerLink="/login" routerLinkActive="active" class="btn-signin">Sign In</a>
      </ng-template>
    </div>
  </header>

  <main class="content">
    <router-outlet />
  </main>

  <footer class="footer">
  </footer>
</div>
